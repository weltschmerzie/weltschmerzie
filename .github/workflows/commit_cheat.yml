name: Super Commit

on:
  workflow_dispatch:
    inputs:
      email:
        description: 'Email'
        required: true
        default: 'lienhartcharles@gmail.com'
      username:
        description: 'Username'
        required: true
        default: 'bluffblue'
      commit:
        description: 'Commit Message'
        required: true
        default: 'ğŸš€ Automated Commit'
      limit:
        description: 'Number of Commits'
        required: true
        default: '100'
  schedule:
    - cron: "*/1 * * * *"
  push:
    branches:
      - main

jobs:
  auto_commit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          persist-credentials: false
          fetch-depth: 0
      
      - name: Initialize Git
        run: |
          git config --local user.email "${{ github.event.inputs.email }}"
          git config --local user.name "${{ github.event.inputs.username }}"
          
          timestamp=$(date -u "+%Y-%m-%dT%H:%M:%S.%NZ")
          echo "$timestamp" > LAST_UPDATED
          git add LAST_UPDATED
          
          messages=(
            "ğŸ”¥ Power Push"
            "âš¡ Lightning Commit"
            "ğŸš€ Blast Off"
            "ğŸ’« Star Power"
            "ğŸŒŸ Galaxy Brain"
            "ğŸ¯ Perfect Shot"
            "ğŸ’ Diamond Push"
            "ğŸ® Game On"
            "ğŸŒˆ Rainbow Push"
            "â­ Super Star"
          )
          
          rand=$((RANDOM % ${#messages[@]}))
          git commit -m "${messages[$rand]}"

      - name: Mass Commit
        run: |
          for ((i=1; i<=${{ github.event.inputs.limit }}; i++))
          do
            sleep 1
            timestamp=$(date -u "+%Y-%m-%dT%H:%M:%S.%NZ")
            echo "$timestamp" > LAST_UPDATED
            git add LAST_UPDATED
            git commit -m "${{ github.event.inputs.commit }} $i"
          done
          
      - name: Push Changes
        uses: ad-m/github-push-action@master
        with:
          force: true
          directory: "."
          github_token: ${{ secrets.GITHUB_TOKEN }}
          branch: ${{ github.ref }}
